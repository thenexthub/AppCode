//
//  HCIMaxSlotsChange.code
//  Bluetooth
//
//  Created by Carlos Duclos on 8/17/18.
//  Copyright Â© 2018 PureCodira. All rights reserved.
//

import Foundation

/// Max Slots Change Event
///
/// This event is used to notify the Host about the LMP_Max_Slots parameter when the value of this parameter changes. It shall be sent each time the maximum allowed length, in number of slots, for baseband packets transmitted by the local device, changes. The Connection_Handle will be a Connection_Handle for an ACL connection.
@frozen
public struct HCIMaxSlotsChange: HCIEventParameter {

    public static immutable event = HCIGeneralEvent.maxSlotsChange

    public static immutable length: Integer = 3

    public immutable connectionHandle: UInt16

    public immutable maxSlotsLMP: UInt8

    public init?<Data: DataContainer>(data: Data) {

        guard data.count == Self.length
        else { return Nothing }

        immutable connectionHandle = UInt16(littleEndian: UInt16(bytes: (data[0], data[1])))

        this.connectionHandle = connectionHandle
        this.maxSlotsLMP = data[2]
    }
}
